function table_data_body_tbody(a,b,c,d,e,f){$("#table-data-body").addClass("table-tbody"),$.ajax({url:"index-view-data.php?p=getBody",type:"get",dateType:"html",data:{"columns[]":a,table:table_name,page:b,limit:c,order:d,type:e,value:f},success:function(a){$("#table-data-body").removeClass("table-tbody"),$("#table-data-body-tbody").html(a)}})}function table_data_footer(a,b,c,d,e,f){$.ajax({url:"index-view-data.php?p=getFooter",type:"get",dateType:"html",data:{"columns[]":a,table:table_name,page:b,limit:c,order:d,type:e,value:f},success:function(a){$("#table-data-footer").html(a)}})}function modal_button_save_insert_data(a){$("#modal-button-save-insert-data").attr("disabled",!0),$("#modal-button-save-insert-data").addClass("disabled"),$.ajax({url:"index-insert-data.php",type:"get",dateType:"text",data:{"columns_value[]":a,"columns[]":column_name,table:table_name},success:function(b){$("#modal-button-save-insert-data").attr("disabled",!1),$("#modal-button-save-insert-data").removeClass("disabled"),$("#modal-insert-data").modal("hide"),"true"==b?$.ajax({url:"index-insert-data.php?p=getID",type:"get",dateType:"text",data:{id:column_name[0],table:table_name},success:function(b){$("#page-alert").append('<div class="alert alert-success"><strong>Thành công !</strong> thêm một hàng thành công với id <b>'+b+"</b> .</div>");var c='<tr class="row-insert-new">';for(c+='<td><input type="checkbox" value="'+b+'" onclick="table_data_body_tbody_tr_td_input_click()" /></td>',a[0]=b,i=0;i<column_name.length;i++)c+="<td>"+a[i]+"</td>";c+="</tr>",$("#table-data-body-tbody").append(c),$("html, body").animate({scrollTop:$("#table-data-footer").offset().top},3e3)}}):($("#page-alert").append('<div class="alert alert-danger"><strong>Cảnh báo !</strong> Đã xảy ra lỗi khi thêm dữ liệu.</div>'),$("html, body").animate({scrollTop:$("#page-alert").offset().top},3e3))}})}function modal_button_save_update_data(a){$("#modal-button-save-update-data").attr("disabled",!0),$("#modal-button-save-update-data").addClass("disabled"),$.ajax({url:"index-update-data.php",type:"get",dateType:"text",data:{"columns_value[]":a,"columns[]":column_name,table:table_name},success:function(b){$("#modal-button-save-update-data").attr("disabled",!1),$("#modal-button-save-update-data").removeClass("disabled"),$("#modal-update-data").modal("hide"),"true"==b?($("#page-alert").append('<div class="alert alert-info"><strong>Thành công !</strong>  chỉnh sửa một hàng thành công với id <b>'+a[0]+"</b> .</div>"),$("#table-data-body-tbody tr").each(function(){var b=$(this).children().children().attr("value");if(b==getID()[0]){$(this).children().each(function(b){0!=b&&$(this).text(a[b-1])}),$(this).addClass("row-update-new");var c=$(this);$("html, body").animate({scrollTop:c.offset().top},3e3)}})):($("#page-alert").append('<div class="alert alert-danger"><strong>Cảnh báo !</strong> Đã xảy ra lỗi khi chỉnh sửa dữ liệu với id <b>'+a[0]+"</b> .</div>"),$("html, body").animate({scrollTop:$("#page-alert").offset().top},3e3))}})}function modal_button_yes_delete_data(){$("#modal-button-yes-delete-data").attr("disabled",!0),$("#modal-button-yes-delete-data").addClass("disabled"),$.ajax({url:"index-delete-data.php",type:"get",dateType:"text",data:{"columns_id[]":getID(),"columns[]":column_name,table:table_name},success:function(a){if($("#modal-button-yes-delete-data").attr("disabled",!1),$("#modal-button-yes-delete-data").removeClass("disabled"),$("#modal-delete-data").modal("hide"),"true"==a){var b=new Date,c=b.get,d=b.getDate(),e=b.getMonth()+1,f=b.getFullYear(),c=b.getHours()+":"+b.getMinutes()+":"+b.getSeconds();d<10&&(d="0"+d),e<10&&(e="0"+e),b=d+"/"+e+"/"+f,$("#table-data-body-tbody tr").each(function(){var a=2,b=$(this);getID_check(b.find("input").val())&&(b.fadeOut(1e3*a),setTimeout(function(){b.remove(),$("#table-data-body-thead-th-check-all").is(":checked")&&($("#table-data-body-thead-th-check-all").prop("checked",!1),table_data_body_tbody(column_name,page,limit,order,type,value),table_data_footer(column_name,page,limit,order,type,value)),set_button_update_data()},1e3*a))}),$("#page-alert").append('<div class="alert alert-warning"><strong>Thành công !</strong> Đã xóa <b>'+getID().length+"</b> hàng thành công vào lúc <b>"+c+" - "+b+"</b> .</div>")}else $("#page-alert").append('<div class="alert alert-danger"><strong>Cảnh báo !</strong> Đã xảy ra lỗi khi xóa dữ liệu .</div>'),$("html, body").animate({scrollTop:$("#page-alert").offset().top},3e3)}})}function button_update_data(){if(1==getID().length){$("#modal-update-data").modal("show");var a=[];for($("#table-data-body-tbody tr").each(function(){var b=$(this).children().children().attr("value");b==getID()[0]&&$(this).children().each(function(b){0!=b&&(a[a.length]=$(this).text())})}),i=0;i<column_name.length;i++)$("#input-Column-update-data-"+column_name[i]).val(a[i])}}function table_data_body_tbody_tr_td_input_click(){set_button_update_data()}function number_page_change(a){var b=$("#number-page").attr("max");a<1||a>b||(a=parseInt(a),$("#table-data-footer-current-row-number").html('<div class="text-center"><h6><i>Hiển thị</i></h6></div>'),table_data_body_tbody(column_name,a,limit,order,type,value),table_data_footer(column_name,a,limit,order,type,value),set_button_update_data())}function number_row_change(){var a=parseInt($("#number-row").val());a<10||a>200||(limit=a,table_data_body_tbody(column_name,page,limit,order,type,value),table_data_footer(column_name,page,limit,order,type,value),set_button_update_data())}function getID(){var a=[];return $("#table-data-body-tbody input[type=checkbox]").each(function(){$(this).is(":checked")&&(a[a.length]=$(this).val())}),a}function getID_check(a){for(i=0;i<getID().length;i++)if(getID()[i]==a)return!0;return!1}function set_button_update_data(){$("button").each(function(){"button-insert-data"==$(this).attr("id")&&(0!=getID().length?($(this).attr("disabled",!0),$(this).hide("slow")):($(this).attr("disabled",!1),$(this).show("slow"))),"button-update-data"==$(this).attr("id")&&(1!=getID().length?($(this).attr("disabled",!0),$(this).hide("slow")):($(this).attr("disabled",!1),$(this).show("slow"))),"button-delete-data"==$(this).attr("id")&&(0==getID().length?($(this).attr("disabled",!0),$(this).hide("slow")):($(this).attr("disabled",!1),$(this).show("slow")))})}function table_data_header_search(a,b){column_name_search=[],a>-1?column_name_search[0]=column_name[a]:column_name_search=column_name,$("#table-data-header-search-concept").html("ÄĂ£ chá»n : <b>"+b+"</b>")}function set_table_data_body_thead(a){var b=a.attr("id");b=b.substring(25,b.lenght),$("#table-data-body-thead th").each(function(){$(this).attr("id")==a.attr("id")?("header"==a.attr("class")?(order=column_name[b-1],type="ASC",a.attr("class","headerSortDown")):"headerSortDown"==a.attr("class")?(order=column_name[b-1],type="DESC",a.attr("class","headerSortUp")):(order=column_name[b-1],type="ASC",a.attr("class","headerSortDown")),table_data_body_tbody(column_name,page,limit,order,type,value),table_data_footer(column_name,page,limit,order,type,value)):"table-data-body-thead-th-0"!==$(this).attr("id")&&$(this).attr("class","header")})}var column_name_search=column_name,page=parseInt($("#number-page").attr("value")),limit=parseInt($("#number-row").val()),order=column_name[0],type="ASC",value=$("#table-data-header-value-search").val();$(document).ready(function(){table_data_body_tbody(column_name,page,limit,order,type,value),table_data_footer(column_name,page,limit,order,type,value),set_button_update_data(),$("#table-data-body-thead-th-check-all").click(function(){$("#table-data-body-thead-th-check-all").is(":checked")?$("#table-data-body-tbody input[type=checkbox]").each(function(){$(this).prop("checked",!0)}):$("#table-data-body-tbody input[type=checkbox]").each(function(){$(this).prop("checked",!1)}),set_button_update_data()}),$("#table-data-body-thead").click(function(a){var b=$(a.target);"table-data-body-thead-th-0"!==b.attr("id")&&set_table_data_body_thead(b)}),$("#button-theme-light").click(function(){$("#theme-css").attr("href","css/main.css")}),$("#button-theme-dark").click(function(){$("#theme-css").attr("href","css/main-dark.css")}),$("#table-data-header-button-search").click(function(){value=$("#table-data-header-value-search").val(),table_data_body_tbody(column_name_search,page,limit,order,type,value),table_data_footer(column_name_search,page,limit,order,type,value)}),$("#modal-button-save-insert-data").click(function(){var a=[];for(a[0]="null",i=1;i<column_name.length;i++)a[i]=$("#input-Column-insert-data-"+column_name[i]).val();modal_button_save_insert_data(a)}),$("#modal-button-save-update-data").click(function(){var a=[];for(i=0;i<column_name.length;i++)a[i]=$("#input-Column-update-data-"+column_name[i]).val();modal_button_save_update_data(a)}),$("#modal-button-yes-delete-data").click(function(){getID().length>0?modal_button_yes_delete_data():$("#modal-delete-data").modal("hide")})});